// Copyright (c) 2024 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import t from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-array-like@v0.1.0-esm/index.mjs";import e from"https://cdn.jsdelivr.net/gh/stdlib-js/proxy-ctor@v0.1.1-esm/index.mjs";import r from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-arraylike2object@v0.1.0-esm/index.mjs";import s from"https://cdn.jsdelivr.net/gh/stdlib-js/string-format@v0.1.1-esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-assert-is-complex-floating-point-data-type@v0.1.0-esm/index.mjs";import{isPrimitive as i}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-number@v0.1.1-esm/index.mjs";import a from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-plain-object@v0.1.0-esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-has-own-property@v0.1.1-esm/index.mjs";import{isPrimitive as d}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-boolean@v0.1.1-esm/index.mjs";import{isPrimitive as l}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-integer@v0.1.0-esm/index.mjs";import p from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-complex-like@v0.1.1-esm/index.mjs";import c from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-assert-is-real-floating-point-data-type@v0.1.0-esm/index.mjs";import m from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-assert-is-unsigned-integer-data-type@v0.1.0-esm/index.mjs";import u from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-assert-is-signed-integer-data-type@v0.1.0-esm/index.mjs";import v from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-assert-is-safe-data-type-cast@v0.1.0-esm/index.mjs";import f from"https://cdn.jsdelivr.net/gh/stdlib-js/array-min-dtype@v0.1.0-esm/index.mjs";import y from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-min-signed-integer-dtype@v0.1.0-esm/index.mjs";import h from"https://cdn.jsdelivr.net/gh/stdlib-js/complex-dtype@v0.1.1-esm/index.mjs";import{isPrimitive as j}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-string@v0.1.1-esm/index.mjs";import g from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-has-property@v0.1.1-esm/index.mjs";import b from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-normalize-index@v0.1.0-esm/index.mjs";import w from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-function@v0.1.1-esm/index.mjs";import x from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-fancy-slice@v0.2.0-esm/index.mjs";import E from"https://cdn.jsdelivr.net/gh/stdlib-js/string-base-replace@v0.1.1-esm/index.mjs";import k from"https://cdn.jsdelivr.net/gh/stdlib-js/string-base-trim@v0.1.1-esm/index.mjs";import A from"https://cdn.jsdelivr.net/gh/stdlib-js/slice-base-seq2slice@v0.1.0-esm/index.mjs";import T from"https://cdn.jsdelivr.net/gh/stdlib-js/slice-base-str2slice@v0.1.0-esm/index.mjs";import D from"https://cdn.jsdelivr.net/gh/stdlib-js/string-base-starts-with@v0.1.1-esm/index.mjs";import S from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-collection@v0.1.0-esm/index.mjs";import I from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-fancy-slice-assign@v0.1.0-esm/index.mjs";import R from"https://cdn.jsdelivr.net/gh/stdlib-js/array-from-scalar@v0.1.0-esm/index.mjs";function _(t){return i(t)?[t,0]:t}function N(t){return n(t)?_:null}var V="function"==typeof e;function U(t,e){return a(e)?o(e,"strict")&&(t.strict=e.strict,!d(t.strict))?new TypeError(s("invalid option. `%s` option must be a boolean. Option: `%s`.","strict",t.strict)):null:new TypeError(s("invalid argument. Options argument must be an object. Value: `%s`.",e))}function C(){return null}function L(t,e){return i(t)?null:p(t)?new TypeError(s("invalid operation. Assigned value cannot be safely cast to the target array data type. Data types: [%s, %s].",h(t),e)):new TypeError(s("invalid operation. Assigned value cannot be safely cast to the target array data type. Data types: [%s, %s].",typeof t,e))}function O(t,e){return i(t)||p(t)?null:new TypeError(s("invalid operation. Assigned value cannot be safely cast to the target array data type. Data types: [%s, %s].",typeof t,e))}function P(t,e){var r;return i(t)?l(t)?(r=y(t),v(r,e)?null:new TypeError(s("invalid operation. Assigned value cannot be safely cast to the target array data type. Data types: [%s, %s].",r,e))):new TypeError(s("invalid operation. Assigned value cannot be safely cast to the target array data type. Data types: [%s, %s].",f(t),e)):p(t)?new TypeError(s("invalid operation. Assigned value cannot be safely cast to the target array data type. Data types: [%s, %s].",h(t),e)):new TypeError(s("invalid operation. Assigned value cannot be safely cast to the target array data type. Data types: [%s, %s].",typeof t,e))}function W(t,e){var r;return i(t)?(r=f(t),v(r,e)?null:new TypeError(s("invalid operation. Assigned value cannot be safely cast to the target array data type. Data types: [%s, %s].",r,e))):p(t)?new TypeError(s("invalid operation. Assigned value cannot be safely cast to the target array data type. Data types: [%s, %s].",h(t),e)):new TypeError(s("invalid operation. Assigned value cannot be safely cast to the target array data type. Data types: [%s, %s].",typeof t,e))}function F(t){return"generic"===t||""===t?C:c(t)?L:m(t)?W:u(t)?P:O}var q=/^-?[0-9]+$/;function z(t){return j(t)&&q.test(t)}function B(t,e,r){var n,i;if(n=parseInt(t,10),-1===(i=b(n,e-1))){if(r)throw new RangeError(s("invalid operation. Slice exceeds array bounds."));return n}return i}function G(t){return E(t,/^invalid argument/,"invalid operation")}var M=/:/;function Q(t,e,r){var n=k(e);return function(t){return"S"===t[0]&&D(t,"Slice(",0)&&")"===t[t.length-1]}(n)?function(t,e){var r=T(e);if(null===r)throw new Error(s("invalid operation. Unsupported slice operation. Value: `%s`.",t));return r}(e,n):function(t){return M.test(t)}(n)?function(t,e,r,n){var i=A(e,r,!0);if(i.code){if("ERR_SLICE_INVALID_INCREMENT"===i.code)throw new Error(s("invalid operation. A subsequence increment must be a non-zero integer. Value: `%s`.",t));if("ERR_SLICE_INVALID_SUBSEQUENCE"===i.code)throw new Error(s("invalid operation. Unsupported slice operation. Value: `%s`.",t));if("ERR_SLICE_OUT_OF_BOUNDS"===i.code){if(n)throw new RangeError(s("invalid operation. Slice exceeds array bounds."));i=A(e,r,!1)}}return i}(e,n,t.length,r):null}function $(t){return function(e,r,s){if(z(r))return function(t,e,r){return r.getter(t,B(e,t.length,r.strict))}(e,r,t);if(g(e,r)||!j(r))return function(t,e,r,s){var n=t[e];return w(n)?n===t.constructor?function(){var t,e,r;for(e=[],r=0;r<arguments.length;r++)e.push(arguments[r]);switch(e.length){case 0:t=new n;break;case 1:t=new n(e[0]);break;case 2:t=new n(e[0],e[1]);break;case 3:t=new n(e[0],e[1],e[2]);break;case 4:t=new n(e[0],e[1],e[2],e[3]);break;case 5:t=new n(e[0],e[1],e[2],e[3],e[4]);break;case 6:t=new n(e[0],e[1],e[2],e[3],e[4],e[5]);break;case 7:t=new n(e[0],e[1],e[2],e[3],e[4],e[5],e[6]);break;case 8:t=new n(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]);break;case 9:t=new n(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]);break;case 10:t=new n(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9]);break;default:t=n.apply(null,e)}return s.array2fancy(t)}:function(){var e,s;for(e=[],s=0;s<arguments.length;s++)e.push(arguments[s]);return n.apply(this===r?t:this,e)}:n}(e,r,s,t);return function(t,e,r,s){var n=Q(t,e,s);if(null!==n)try{return x(r,n,s)}catch(t){throw new t.constructor(G(t.message))}}(e,r,s,t.strict)}}function H(t,e,r){return t[e]=r,!0}function J(t){return function(e,r,s,n){var i;if(z(r))return function(t,e,r,s){var n,i;if(n=s.validator(r,s.dtype))throw n;return i=s.valueWrapper?s.valueWrapper(r):r,s.setter(t,B(e,t.length,s.strict),i),!0}(e,r,s,t);if(g(r)||!j(r))return H(e,r,s);if(i=function(t,e,r,s,n){var i,a,o;if(null===(a=Q(t,e,n.strict)))return!1;if(S(r))o=r;else{if(i=n.validator(r,n.dtype))throw i;o=R(r,n.dtype)}try{return I(o,s,a,n.strict),!0}catch(i){throw new i.constructor(G(i.message))}}(e,r,s,n,t),i)return i;return H(e,r,s)}}function K(n){var i,a,o,d,l;if(!t(n))throw new TypeError(s("invalid argument. First argument must be array-like. Value: `%s`.",n));if(V){if(i={strict:!1},arguments.length>1&&(a=U(i,arguments[1])))throw a;return l={ref:n,dtype:d=(o=r(n)).dtype||"",getter:o.accessors[0],setter:o.accessors[1],valueWrapper:N(d),strict:i.strict,validator:F(d),array2fancy:K},new e(n,{get:$(l),set:J(l)})}return console.warn("WARNING: Proxy objects are not supported in the current environment. Some `FancyArray` functionality may not be available."),n}export{K as default};
//# sourceMappingURL=index.mjs.map
